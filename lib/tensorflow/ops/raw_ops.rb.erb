# Generated by `rake generate_ops`

module Tensorflow
  module RawOps
    def self.execute(op_type, inputs=[], attrs={})
      context = ExecutionContext.current(inputs)
      attrs = attrs.compact
      operation = context.create_operation(op_type, inputs, attrs)
      if context.is_a?(Graph::Graph)
        operation
      else
        context.execute(operation)
      end
    end

  <% Tensorflow.op_defs.values.sort_by(&:name).each do |op_def|
     name = RawOpHelper.underscore(op_def.name).downcase

     input_names = op_def.input_arg.map do |input|
       RawOpHelper.check_name(input.name)
     end

     attributes_in = op_def.attr.map do |attr_def|
       RawOpHelper.process_attribute(attr_def)
     end
     attributes_in << "name: nil"

     attributes_out = op_def.attr.map do |attr_def|
       attribute_name = RawOpHelper.check_attribute_name(attr_def)
       "#{attr_def.name}: #{attribute_name}"
     end
     attributes_out << "name: name" %>

    def self.<%= name %>(<%= (input_names + attributes_in).join(', ') %>)
      self.execute("<%= op_def.name %>", [<%= input_names.join(', ') %>], <%= attributes_out.join(', ') %>)
    end
  <% end %>
  end
end